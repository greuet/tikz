%& --shell-escape
\documentclass{article}
\usepackage{graphics}
\usepackage{pgfplots}
\usepackage[active,tightpage]{preview}
\PreviewEnvironment{tikzpicture}


\pgfplotsset{compat=newest}

\begin{document}
\begin{tikzpicture}[xscale=0.7]
  \begin{axis}[grid = major, hide axis]
    \addplot+[mark=none, smooth, color = black, thick] function[raw gnuplot] {
      set xrange [-5:5];
      set yrange [-5:5];
      set contour base;
      set cntrparam levels incre 0,0.1,0;
      set size square;
      set cont base;
      unset surface;
      set view map;
      set isosamples 2000,2000;
      splot y**2 - x**3 + 2 *x + -1;
    };

    \addplot+[mark=*, mark size = 1pt, scatter, scatter src=explicit, thick] 
    coordinates 
    {
      ({ -1.15 },{ 1.35 })[1]
      ({ 2.8 },{ 4.15 })[1]
    };
    \addplot+[mark=*, mark size = 1pt, scatter, scatter src=explicit] 
    coordinates 
    {
      ({ 2.8 },{ -4.15 })[1]
    };

    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    % tangente en P ({ -1 },{ sqrt(2) })
    \addplot+[color = red, mark = none, thick] coordinates {
        ({ 3 },{ 3*sqrt(2)+0.05})
        ({ -2 },{ 1/2*sqrt(2)+0.05})
    };
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    \addplot+[dotted, thick, color = red, mark = none] coordinates {
        ({ 2.8 },{ 5 })
        ({ 2.8 },{ -5 })
    };

    \node[anchor = south east] at (axis cs: -1.1 , 1.3 ) {$P$};
    \node[anchor = south east] at (axis cs: 2.8 , 4) {$-[2]P$};
    \node[anchor = east] at (axis cs: 2.8 , -4.4) {$[2]P$};
    % \node[anchor = south east] at (axis cs: 2.8 , 4) {\resizebox{4.18ex}{1ex}{$-[2]P$}};
    % \node[anchor = east] at (axis cs: 2.8 , -4.1) {\resizebox{2.5ex}{1ex}{$[2]P$}};
  \end{axis}
\end{tikzpicture}









\end{document}

