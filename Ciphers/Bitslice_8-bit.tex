\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{tikz}
\usepackage{amsmath}


\usetikzlibrary{backgrounds,calc,shapes,shapes.symbols, fit,
  decorations.pathmorphing, decorations.pathreplacing, positioning}
\usepackage[graphics,tightpage,active]{preview}
\PreviewEnvironment{tikzpicture}


\definecolor{OTOrangeYellow}{RGB}{238,127,0}
\definecolor{OTBlue}{RGB}{0,81,158}
\definecolor{OTRed}{RGB}{226,0,43}
\definecolor{OTGreen}{RGB}{0,134,51}


\tikzset{table/.style={matrix, column sep=-\pgflinewidth, nodes={rectangle},
    minimum width=3pt, minimum height=10pt,
    inner sep =0}}
\tikzset{case empty/.style={minimum height = 15pt, minimum width = 25pt}}
\tikzset{case zero/.style={draw, nodes={rectangle}, fill=OTGreen!70,
    minimum height = 15pt, minimum width = 10pt}}
\tikzset{case one/.style={draw, nodes={rectangle}, fill=OTRed!70,
    minimum height = 15pt, minimum width = 10pt}}
\tikzset{case two/.style={draw, nodes={rectangle}, fill=OTBlue!70,
    minimum height = 15pt, minimum width = 10pt}}
\tikzset{case three/.style={draw, nodes={rectangle}, fill=OTOrangeYellow!70,
    minimum height = 15pt, minimum width = 10pt}}



\begin{document}
\ttfamily
\begin{tikzpicture}[>=latex]
  \matrix (registers) [table] {
    \node[case zero] (z0) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] {3}; &
    \node[case zero] (z1) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] (th1) {3}; &
    \node[case empty] {}; &
    \node[case zero] (z2) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] {3}; &
    \node[case zero] (z3) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] (th3) {3}; &
    \node[case empty] {}; &
    \node[case zero] (z4) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] {3}; &
    \node[case zero] (z5) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] (th5) {3}; &
    \node[case empty] {}; &
    \node[case zero] (z6) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] {3}; &
    \node[case zero] (z7) {0}; &  \node[case one] {1}; & 
    \node[case two] {2}; &  \node[case three] (th7) {3}; \\
  };

  \node[fit=(z0)(th1), above] {register 0};
  \node[fit=(z2)(th3), above] {register 1};
  \node[fit=(z4)(th5), above] {register 2};
  \node[fit=(z6)(th7), above] {register 3};

  \matrix (registers bitslice) [table, below = of registers] {
    \node[case zero] (z0bs) {0}; &  \node[case zero] (z1bs) {0}; & 
    \node[case zero] (z2bs) {0}; &  \node[case zero] (z3bs) {0}; & 
    \node[case zero] (z4bs) {0}; &  \node[case zero] (z5bs) {0}; & 
    \node[case zero] (z6bs) {0}; &  \node[case zero] (z7bs) {0}; & 
    \node[case empty] {}; &
    \node[case one] (o0bs) {1}; &  \node[case one] {1}; & 
    \node[case one] {1}; &  \node[case one] {1}; & 
    \node[case one] {1}; &  \node[case one] {1}; & 
    \node[case one] {1}; &  \node[case one] (o7bs) {1}; & 
    \node[case empty] {}; &
    \node[case two] (tw0bs) {2}; &  \node[case two] {2}; & 
    \node[case two] {2}; &  \node[case two] {2}; & 
    \node[case two] {2}; &  \node[case two] {2}; & 
    \node[case two] {2}; &  \node[case two] (tw7bs) {2}; & 
    \node[case empty] {}; &
    \node[case three] (th0bs) {3}; &  \node[case three] {3}; & 
    \node[case three] {3}; &  \node[case three] {3}; & 
    \node[case three] {3}; &  \node[case three] {3}; & 
    \node[case three] {3}; &  \node[case three] (th7bs) {3}; \\
  };

  \draw[decorate, decoration=brace, ultra thick]
  ([yshift=-2pt,xshift=1pt]z7bs.south east) 
  -- ([yshift=-2pt,xshift=-1pt]z0bs.south west)
  node[midway, below,yshift = -4pt,
  text width = 20ex, text centered] {\sffamily Apply $f_0$};

  \draw[decorate, decoration=brace, ultra thick]
  ([yshift=-2pt,xshift=1pt]o7bs.south east) 
  -- ([yshift=-2pt,xshift=-1pt]o0bs.south west)
  node[midway, below,yshift = -4pt,
  text width = 20ex, text centered] {\sffamily Apply $f_1$};

  \draw[decorate, decoration=brace, ultra thick]
  ([yshift=-2pt,xshift=1pt]tw7bs.south east) 
  -- ([yshift=-2pt,xshift=-1pt]tw0bs.south west)
  node[midway, below,yshift = -4pt,
  text width = 20ex, text centered] {\sffamily Apply $f_2$};

  \draw[decorate, decoration=brace, ultra thick]
  ([yshift=-2pt,xshift=1pt]th7bs.south east) 
  -- ([yshift=-2pt,xshift=-1pt]th0bs.south west)
  node[midway, below,yshift = -4pt,
  text width = 20ex, text centered] {\sffamily Apply $\mathsf{f_3}$};

  \draw[->,OTGreen,thick] (z0.south) -- (z0bs.north);
  \draw[->,OTGreen,thick] (z1.south) -- ++ (0, -0.1) -| (z1bs.north);
  \draw[->,OTGreen,thick] (z2.south) -- ++ (0, -0.2) -|(z2bs.north);
  \draw[->,OTGreen,thick] (z3.south) -- ++ (0, -0.3) -|(z3bs.north);
  \draw[->,OTGreen,thick] (z4.south) -- ++ (0, -0.4) -|(z4bs.north);
  \draw[->,OTGreen,thick] (z5.south) -- ++ (0, -0.5) -|(z5bs.north);
  \draw[->,OTGreen,thick] (z6.south) -- ++ (0, -0.6) -|(z6bs.north);
  \draw[->,OTGreen,thick] (z7.south) -- ++ (0, -0.7) -|(z7bs.north);
\end{tikzpicture}
\end{document}